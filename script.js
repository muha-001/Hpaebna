// === Translations Object ===
const translations = {
    ar: {
        nav_home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        nav_menu: "Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",
        nav_reservation: "Ø§Ù„Ø­Ø¬Ø²",
        nav_contact: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
        hero_title: "Ù…Ø·Ø¹Ù… Ø­Ø¨Ø§ÙŠØ¨Ù†Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ",
        hero_subtitle: "Ø·Ø¹Ù… Ø¨ØºØ¯Ø§Ø¯ Ø§Ù„Ø£ØµÙŠÙ„ ÙÙŠ ÙƒÙ„ Ù„Ù‚Ù…Ø©<br>Ù†Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ø¹Ø±Ø§Ù‚Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠ ÙˆÙ„Ø°Ø© Ø§Ù„Ø­Ø§Ø¶Ø±",
        btn_eastern: "Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø´Ø±Ù‚ÙŠØ©",
        btn_fastfood: "ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        menu_title: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…",
        search_placeholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø¨Ù‚Ùƒ Ø§Ù„Ù…ÙØ¶Ù„...",
        cat_eastern: "Ø£Ø·Ø¨Ø§Ù‚ Ø´Ø±Ù‚ÙŠØ©",
        cat_fastfood: "ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        cat_desserts: "Ø­Ù„ÙˆÙŠØ§Øª ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª",
        cart_title: "Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª",
        cart_empty: "Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹",
        cart_subtotal: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:",
        cart_delivery: "Ø£Ø¬ÙˆØ± Ø§Ù„ØªÙˆØµÙŠÙ„:",
        cart_total: "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:",
        btn_checkout: "Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨",
        checkout_title: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„",
        label_name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ:",
        label_phone: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:",
        label_address: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ù‚ÙŠÙ‚:",
        label_landmark: "Ø£Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©:",
        btn_send_whatsapp: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",
        gallery_title: "Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±",
        reviews_title: "Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†",
        toast_added: "ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© {item} Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©",
        status_open: "Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†",
        status_closed: "Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹",
        currency: "Ø¯.Ø¹",
        add_to_cart: "Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©"
    },
    en: {
        nav_home: "Home",
        nav_menu: "Menu",
        nav_reservation: "Reservation",
        nav_contact: "Contact",
        hero_title: "Habaibna International",
        hero_subtitle: "The authentic taste of Baghdad in every bite <br> Combining heritage with modern flavors",
        btn_eastern: "Eastern Dishes",
        btn_fastfood: "Fast Food",
        menu_title: "Food Menu",
        search_placeholder: "Search for your favorite dish...",
        cat_eastern: "Eastern",
        cat_fastfood: "Fast Food",
        cat_desserts: "Desserts & Drinks",
        cart_title: "Your Order",
        cart_empty: "Your cart is empty",
        cart_subtotal: "Subtotal:",
        cart_delivery: "Delivery Fee:",
        cart_total: "Final Total:",
        btn_checkout: "Checkout",
        checkout_title: "Delivery Information",
        label_name: "Full Name:",
        label_phone: "Phone Number:",
        label_address: "Exact Address:",
        label_landmark: "Nearest Landmark:",
        btn_send_whatsapp: "Send via WhatsApp",
        gallery_title: "Gallery",
        reviews_title: "Customer Reviews",
        toast_added: "Added {item} to cart",
        status_open: "Open Now",
        status_closed: "Closed Now",
        currency: "IQD",
        add_to_cart: "Add to Cart"
    }
};

let currentLang = localStorage.getItem('lang') || 'ar';

// === Menu Data (All 30 Items Restricted) ===
const menuItems = [
    // Eastern
    { id: 1, category: 'eastern', name: 'Ù…Ù†Ø³Ù Ø­Ø¨Ø§ÙŠØ¨Ù†Ø§', name_en: 'Mansaf Habaibna', price: '25,000', img: 'assets/mansaf.png', desc: 'Ø§Ù„Ù…Ù†Ø³Ù Ø§Ù„Ø£ØµÙ„ÙŠ Ø¨Ø§Ù„Ø¬Ù…ÙŠØ¯ ÙˆØ§Ù„Ù„Ø­Ù… Ø§Ù„Ø¨Ù„Ø¯ÙŠ', desc_en: 'Original Mansaf with Jameed and local lamb.', ingredients: [{ n: 'Ù„Ø­Ù… Ø®Ø±ÙˆÙ', i: 'ğŸ–' }, { n: 'Ø¬Ù…ÙŠØ¯', i: 'ğŸ¥›' }, { n: 'Ø£Ø±Ø²', i: 'ğŸš' }, { n: 'Ù„ÙˆØ²', i: 'ğŸ¥œ' }] },
    { id: 2, category: 'eastern', name: 'ÙƒØ¨Ø§Ø¨ Ø¹Ø±Ø§Ù‚ÙŠ', name_en: 'Iraqi Kebab', price: '18,000', img: 'assets/kebab.png', desc: 'ÙƒØ¨Ø§Ø¨ Ù…Ø´ÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙØ­Ù… Ù…Ø¹ Ø§Ù„Ø·Ù…Ø§Ø·Ù… ÙˆØ§Ù„Ø¨ØµÙ„', desc_en: 'Grilled kebab on charcoal with tomatoes and onions.', ingredients: [{ n: 'Ù„Ø­Ù… Ù…ÙØ±ÙˆÙ…', i: 'ğŸ¥©' }, { n: 'Ø¨ØµÙ„', i: 'ğŸ§…' }, { n: 'Ø³Ù…Ø§Ù‚', i: 'ğŸ§‚' }, { n: 'Ø®Ø¨Ø²', i: 'ğŸ«“' }] },
    { id: 3, category: 'eastern', name: 'Ù‚ÙˆØ²ÙŠ Ø¹Ù„Ù‰ ØªÙ…Ù†', name_en: 'Quzi on Rice', price: '30,000', img: 'assets/quzi.png', desc: 'Ù‚Ø·Ø¹Ø© Ù„Ø­Ù… ÙƒØªÙ Ù…Ø·Ù‡ÙŠØ© Ø¨Ø¨Ø·Ø¡ Ù…Ø¹ Ø§Ù„Ø±Ø² ÙˆØ§Ù„Ù…ÙƒØ³Ø±Ø§Øª', desc_en: 'Slow-cooked lamb shoulder with rice and nuts.', ingredients: [{ n: 'Ù„Ø­Ù… ÙƒØªÙ', i: 'ğŸ–' }, { n: 'Ø£Ø±Ø² Ù…Ø¨Ù‡Ø±', i: 'ğŸš' }, { n: 'Ø²Ø¨ÙŠØ¨', i: 'ğŸ‡' }, { n: 'Ù…ÙƒØ³Ø±Ø§Øª', i: 'ğŸ¥œ' }] },
    { id: 4, category: 'eastern', name: 'Ø¯ÙˆÙ„Ù…Ø© Ø¹Ø±Ø§Ù‚ÙŠØ©', name_en: 'Iraqi Dolma', price: '15,000', img: 'assets/dolma.png', desc: 'Ù…Ø´ÙƒÙ„ Ø®Ø¶Ø§Ø± Ù…Ø­Ø´ÙŠ Ø¨Ø§Ù„Ø±Ø² ÙˆØ§Ù„Ù„Ø­Ù… Ø§Ù„Ù…ÙØ±ÙˆÙ…', desc_en: 'Mixed vegetables stuffed with rice and minced meat.', ingredients: [{ n: 'ÙˆØ±Ù‚ Ø¹Ù†Ø¨', i: 'ğŸƒ' }, { n: 'Ø¨ØµÙ„', i: 'ğŸ§…' }, { n: 'Ù„Ø­Ù…', i: 'ğŸ¥©' }, { n: 'Ø£Ø±Ø²', i: 'ğŸš' }] },
    { id: 5, category: 'eastern', name: 'Ø³Ù…Ùƒ Ù…Ø³ÙƒÙˆÙ', name_en: 'Masgouf Fish', price: '35,000', img: 'assets/masgouf.png', desc: 'Ø§Ù„Ø³Ù…Ùƒ Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ Ø§Ù„Ø´Ù‡ÙŠØ± Ø§Ù„Ù…Ø´ÙˆÙŠ Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©', desc_en: 'Famous Iraqi grilled fish in the traditional way.', ingredients: [{ n: 'Ø³Ù…Ùƒ', i: 'ğŸŸ' }, { n: 'Ù„ÙŠÙ…ÙˆÙ†', i: 'ğŸ‹' }, { n: 'Ù…Ù„Ø­ Ø®Ø´Ù†', i: 'ğŸ§‚' }, { n: 'Ù†Ø§Ø± Ø§Ù„Ø­Ø·Ø¨', i: 'ğŸ”¥' }] },
    { id: 6, category: 'eastern', name: 'Ù…Ø±Ù‚ Ø¨Ø§Ù…ÙŠØ© Ø¨Ø§Ù„Ù„Ø­Ù…', name_en: 'Okra Stew with Meat', price: '12,000', img: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?auto=format&fit=crop&w=800', desc: 'Ø¨Ø§Ù…ÙŠØ© Ø·Ø§Ø²Ø¬Ø© Ù…Ø¹ Ù‚Ø·Ø¹ Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„ØµÙ„ØµØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡', desc_en: 'Fresh okra with meat pieces and red sauce.', ingredients: [{ n: 'Ø¨Ø§Ù…ÙŠØ©', i: 'ğŸ¥—' }, { n: 'Ù„Ø­Ù…', i: 'ğŸ–' }, { n: 'Ø·Ù…Ø§Ø·Ù…', i: 'ğŸ…' }, { n: 'Ø«ÙˆÙ…', i: 'ğŸ§„' }] },
    { id: 7, category: 'eastern', name: 'ÙƒØ¨Ø© Ù…ÙˆØµÙ„ÙŠØ©', name_en: 'Mosul Kubba', price: '10,000', img: 'https://images.unsplash.com/photo-1563379091339-03246963d9d6?auto=format&fit=crop&w=800', desc: 'ÙƒØ¨Ø© Ø¨Ø±ØºÙ„ Ù…Ø­Ø´ÙŠØ© Ø¨Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„Ù…ÙƒØ³Ø±Ø§Øª', desc_en: 'Bulgur kubba stuffed with meat and nuts.', ingredients: [{ n: 'Ø¨Ø±ØºÙ„', i: 'ğŸŒ¾' }, { n: 'Ù„Ø­Ù…', i: 'ğŸ¥©' }, { n: 'ØµÙ†ÙˆØ¨Ø±', i: 'ğŸŒ²' }, { n: 'Ø¨Ù‡Ø§Ø±Ø§Øª', i: 'ğŸ§‚' }] },
    { id: 8, category: 'eastern', name: 'Ø´ÙŠØ® Ø§Ù„Ù…Ø­Ø´ÙŠ (ÙƒÙˆØ³Ø§)', name_en: 'Sheikh al-Mahshi', price: '14,000', img: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?auto=format&fit=crop&w=800', desc: 'ÙƒÙˆØ³Ø§ Ù…Ø­Ø´ÙŠØ© Ø¨Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„ØµÙ†ÙˆØ¨Ø± Ø¨ØµÙˆØµ Ø§Ù„Ù„Ø¨Ù†', desc_en: 'Zucchini stuffed with meat and pine nuts in yogurt sauce.', ingredients: [{ n: 'ÙƒÙˆØ³Ø§', i: 'ğŸ¥’' }, { n: 'Ù„Ø­Ù…', i: 'ğŸ¥©' }, { n: 'Ù„Ø¨Ù†', i: 'ğŸ¥›' }, { n: 'Ù†Ø¹Ù†Ø§Ø¹', i: 'ğŸŒ¿' }] },
    { id: 9, category: 'eastern', name: 'ØªØ´Ø±ÙŠØ¨ Ø¯Ø¬Ø§Ø¬', name_en: 'Chicken Tashreeb', price: '15,000', img: 'https://images.unsplash.com/photo-1563379091339-03246963d9d6?auto=format&fit=crop&w=800', desc: 'ØªØ´Ø±ÙŠØ¨ Ø¹Ø±Ø§Ù‚ÙŠ Ø£ØµÙØ± Ø¨Ø§Ù„Ø¯Ø¬Ø§Ø¬ ÙˆØ§Ù„Ø®Ø¨Ø²', desc_en: 'Yellow Iraqi tashreeb with chicken and bread.', ingredients: [{ n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'Ø®Ø¨Ø²', i: 'ğŸ' }, { n: 'Ù†ÙˆÙ…ÙŠ Ø¨ØµØ±Ø©', i: 'ğŸ‹' }, { n: 'Ø­Ù…Øµ', i: 'ğŸ¥œ' }] },
    { id: 10, category: 'eastern', name: 'Ø¨Ø±ÙŠØ§Ù†ÙŠ Ø¹Ø±Ø§Ù‚ÙŠ', name_en: 'Iraqi Biryani', price: '16,000', img: 'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?auto=format&fit=crop&w=800', desc: 'Ø£Ø±Ø² Ù…Ø¨Ù‡Ø± Ù…Ø¹ Ø§Ù„Ø¯Ø¬Ø§Ø¬ ÙˆØ§Ù„Ø´Ø¹ÙŠØ±ÙŠØ© ÙˆØ§Ù„Ø¨Ø·Ø§Ø·Ø§', desc_en: 'Spiced rice with chicken, vermicelli, and potatoes.', ingredients: [{ n: 'Ø£Ø±Ø²', i: 'ğŸš' }, { n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'Ø¨Ø§Ø²Ù„Ø§Ø¡', i: 'ğŸŸ¢' }, { n: 'Ø¨Ù‡Ø§Ø±Ø§Øª', i: 'ğŸŒ¶ï¸' }] },

    // Fast Food
    { id: 11, category: 'fastfood', name: 'ÙƒÙ„Ø§Ø³ÙŠÙƒ Ø¨ÙŠÙ Ø¨Ø±Ø¬Ø±', name_en: 'Classic Beef Burger', price: '12,000', img: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&w=800', desc: 'Ø´Ø±ÙŠØ­Ø© Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ ØµØ§ÙÙŠ Ù…Ø¹ Ø§Ù„Ø¬Ø¨Ù† Ø§Ù„Ø°Ø§Ø¦Ø¨', desc_en: 'Pure beef patty with melted cheese.', ingredients: [{ n: 'Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ', i: 'ğŸ¥©' }, { n: 'Ø¬Ø¨Ù†', i: 'ğŸ§€' }, { n: 'Ø®Ø³', i: 'ğŸ¥¬' }, { n: 'Ø·Ù…Ø§Ø·Ù…', i: 'ğŸ…' }] },
    { id: 12, category: 'fastfood', name: 'Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬', name_en: 'Chicken Shawarma', price: '8,000', img: 'https://images.unsplash.com/photo-1616683693504-3ea7d5d5f5c5?auto=format&fit=crop&w=800', desc: 'Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ Ø¨Ø§Ù„ØªØªØ¨ÙŠÙ„Ø© Ø§Ù„Ø®Ø§ØµØ© ÙˆØ§Ù„Ø«ÙˆÙ…ÙŠØ©', desc_en: 'Chicken shawarma with special seasoning and garlic sauce.', ingredients: [{ n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'Ø«ÙˆÙ…ÙŠØ©', i: 'ğŸ§„' }, { n: 'Ù…Ø®Ù„Ù„', i: 'ğŸ¥’' }, { n: 'Ø®Ø¨Ø² ØµØ§Ø¬', i: 'ğŸ«“' }] },
    { id: 13, category: 'fastfood', name: 'Ø¨ÙŠØªØ²Ø§ Ø³ÙˆØ¨Ø±ÙŠÙ…', name_en: 'Supreme Pizza', price: '15,000', img: 'https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=800', desc: 'Ø¨ÙŠØªØ²Ø§ ØºÙ†ÙŠØ© Ø¨Ø§Ù„Ù„Ø­Ù… ÙˆØ§Ù„Ø®Ø¶Ø±ÙˆØ§Øª ÙˆØ§Ù„Ø¬Ø¨Ù†', desc_en: 'Pizza rich in meat, vegetables, and cheese.', ingredients: [{ n: 'Ø¹Ø¬ÙŠÙ†', i: 'ğŸ•' }, { n: 'Ø¨Ø¨Ø±ÙˆÙ†ÙŠ', i: 'ğŸ¥“' }, { n: 'ÙÙ„ÙÙ„', i: 'ğŸ«‘' }, { n: 'Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§', i: 'ğŸ§€' }] },
    { id: 14, category: 'fastfood', name: 'Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙƒØ¨Ø§Ø¨', name_en: 'Kebab Sandwich', price: '7,000', img: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=800', desc: 'Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙƒØ¨Ø§Ø¨ Ø¹Ø±Ø§Ù‚ÙŠ Ø¨Ø§Ù„ØµÙ…ÙˆÙ† Ø§Ù„Ø­Ø¬Ø±ÙŠ', desc_en: 'Iraqi kebab sandwich in stone oven bread.', ingredients: [{ n: 'ÙƒØ¨Ø§Ø¨', i: 'ğŸ¢' }, { n: 'ØµÙ…ÙˆÙ†', i: 'ğŸ¥–' }, { n: 'Ø¨ØµÙ„', i: 'ğŸ§…' }, { n: 'Ø·Ø­ÙŠÙ†Ø©', i: 'ğŸ¥£' }] },
    { id: 15, category: 'fastfood', name: 'Ø¨Ø·Ø§Ø·Ø§ Ø¨Ø§Ù„Ø¬Ø¨Ù†', name_en: 'Cheesy Fries', price: '6,000', img: 'https://images.unsplash.com/photo-1565958011703-44f9829ba187?auto=format&fit=crop&w=800', desc: 'Ø¨Ø·Ø§Ø·Ø§ Ù…Ù‚Ù„ÙŠØ© Ù…ØºØ·Ø§Ø© Ø¨ØµÙˆØµ Ø§Ù„Ø´ÙŠØ¯Ø±', desc_en: 'French fries covered with cheddar sauce.', ingredients: [{ n: 'Ø¨Ø·Ø§Ø·Ø§', i: 'ğŸŸ' }, { n: 'Ø¬Ø¨Ù†', i: 'ğŸ§€' }, { n: 'Ù‡Ø§Ù„Ø§Ø¨ÙŠÙ†Ùˆ', i: 'ğŸŒ¶ï¸' }] },
    { id: 16, category: 'fastfood', name: 'Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙŠ (Ø¨Ø±ÙˆØ³ØªØ¯)', name_en: 'Broasted Chicken', price: '18,000', img: 'https://images.unsplash.com/photo-1626645738196-c2a7c87a8f58?auto=format&fit=crop&w=800', desc: 'Ù†ØµÙ Ø¯Ø¬Ø§Ø¬Ø© Ù…Ù‚Ø±Ù…Ø´Ø© Ù…Ø¹ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§ ÙˆØ§Ù„Ø«ÙˆÙ…ÙŠØ©', desc_en: 'Crispy chicken with fries and garlic sauce.', ingredients: [{ n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'ØªØªØ¨ÙŠÙ„Ø©', i: 'ğŸ¤«' }, { n: 'Ø¨Ø·Ø§Ø·Ø§', i: 'ğŸŸ' }, { n: 'Ø«ÙˆÙ…', i: 'ğŸ§„' }] },
    { id: 17, category: 'fastfood', name: 'Ù‡ÙˆØª Ø¯ÙˆØ¬ Ø³Ø¨ÙŠØ´Ø§Ù„', name_en: 'Special Hot Dog', price: '8,000', img: 'https://images.unsplash.com/photo-1619740455993-9e612b1af08a?auto=format&fit=crop&w=800', desc: 'Ù†Ù‚Ø§Ù†Ù‚ Ù…Ø´ÙˆÙŠØ© Ù…Ø¹ Ø§Ù„Ù…Ø§Ø³ØªØ±Ø¯ ÙˆØ§Ù„ÙƒØ§ØªØ´Ø¨', desc_en: 'Grilled hot dog with mustard and ketchup.', ingredients: [{ n: 'Ù†Ù‚Ø§Ù†Ù‚', i: 'ğŸŒ­' }, { n: 'Ø®Ø±Ø¯Ù„', i: 'ğŸŸ¡' }, { n: 'ÙƒØ§ØªØ´Ø¨', i: 'ğŸ”´' }, { n: 'Ø®Ø¨Ø²', i: 'ğŸ¥–' }] },
    { id: 18, category: 'fastfood', name: 'Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ÙÙ„Ø§ÙÙ„', name_en: 'Falafel Sandwich', price: '3,000', img: 'https://images.unsplash.com/photo-1596560548464-f010549b84d7?auto=format&fit=crop&w=800', desc: 'ÙÙ„Ø§ÙÙ„ Ø¹Ø±Ø§Ù‚ÙŠØ© Ù…Ù‚Ø±Ù…Ø´Ø© Ø¨Ø§Ù„Ø¹Ù…Ø¨Ø©', desc_en: 'Crispy Iraqi falafel with amba.', ingredients: [{ n: 'ÙÙ„Ø§ÙÙ„', i: 'ğŸ§†' }, { n: 'Ø¹Ù…Ø¨Ø©', i: 'ğŸ¥­' }, { n: 'Ø³Ù„Ø·Ø©', i: 'ğŸ¥—' }, { n: 'ØµÙ…ÙˆÙ†', i: 'ğŸ¥–' }] },
    { id: 19, category: 'fastfood', name: 'ÙƒØ±Ø³Ø¨ÙŠ ØªØ´ÙŠÙƒÙ† Ø¨Ø±Ø¬Ø±', name_en: 'Crispy Chicken Burger', price: '10,000', img: 'https://images.unsplash.com/photo-1607013251379-e6eecfffe234?auto=format&fit=crop&w=800', desc: 'ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ Ù…Ø¹ Ø§Ù„Ø®Ø³ ÙˆØ§Ù„Ù…Ø§ÙŠÙˆÙ†ÙŠØ²', desc_en: 'Crispy chicken breast with lettuce and mayo.', ingredients: [{ n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'Ù…Ø§ÙŠÙˆÙ†ÙŠØ²', i: 'âšª' }, { n: 'Ø®Ø³', i: 'ğŸ¥¬' }, { n: 'Ø®Ø¨Ø²', i: 'ğŸ”' }] },
    { id: 20, category: 'fastfood', name: 'Ù†Ø§Ø¬ØªØ³ Ù„Ù„Ø£Ø·ÙØ§Ù„', name_en: 'Kids Nuggets', price: '8,000', img: 'https://images.unsplash.com/photo-1562967916-eb82221dfb92?auto=format&fit=crop&w=800', desc: 'Ù‚Ø·Ø¹ Ø¯Ø¬Ø§Ø¬ Ø°Ù‡Ø¨ÙŠØ© Ù…Ø¹ Ø§Ù„Ø¨Ø·Ø§Ø·Ø§ ÙˆØ§Ù„Ø¹ØµÙŠØ±', desc_en: 'Golden chicken pieces with fries.', ingredients: [{ n: 'Ø¯Ø¬Ø§Ø¬', i: 'ğŸ—' }, { n: 'Ø¨Ù‚Ø³Ù…Ø§Ø·', i: 'ğŸ' }, { n: 'Ø¨Ø·Ø§Ø·Ø§', i: 'ğŸŸ' }, { n: 'ÙƒØ§ØªØ´Ø¨', i: 'ğŸ…' }] },

    // Desserts
    { id: 21, category: 'desserts', name: 'ÙƒÙ†Ø§ÙØ© Ø¨Ø§Ù„Ø¬Ø¨Ù†', name_en: 'Cheese Kunafa', price: '8,000', img: 'https://images.unsplash.com/photo-1541783245831-57d6fb0926d3?auto=format&fit=crop&w=800', desc: 'ÙƒÙ†Ø§ÙØ© Ù†Ø§Ø¨Ù„Ø³ÙŠØ© Ø³Ø§Ø®Ù†Ø© Ø¨Ø§Ù„Ù‚Ø·Ø± ÙˆØ§Ù„ÙØ³ØªÙ‚', desc_en: 'Hot Nabulsi kunafa with syrup and pistachios.', ingredients: [{ n: 'Ø¹Ø¬ÙŠÙ†Ø©', i: 'ğŸ¥¨' }, { n: 'Ø¬Ø¨Ù†', i: 'ğŸ§€' }, { n: 'ÙØ³ØªÙ‚', i: 'ğŸ¥œ' }, { n: 'Ø´ÙŠØ±Ø©', i: 'ğŸ¯' }] },
    { id: 22, category: 'desserts', name: 'Ø¨Ø³Ø¨ÙˆØ³Ø©', name_en: 'Basbousa', price: '5,000', img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?auto=format&fit=crop&w=800', desc: 'Ø¨Ø³Ø¨ÙˆØ³Ø© Ù‡Ø´Ø© Ø¨Ø§Ù„Ù„ÙˆØ² ÙˆØ¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯', desc_en: 'Soft basbousa with almonds and coconut.', ingredients: [{ n: 'Ø³Ù…ÙŠØ¯', i: 'ğŸŒ¾' }, { n: 'Ø¬ÙˆØ² Ù‡Ù†Ø¯', i: 'ğŸ¥¥' }, { n: 'Ù„ÙˆØ²', i: 'ğŸ¥œ' }, { n: 'Ù‚Ø·Ø±', i: 'ğŸ¯' }] },
    { id: 23, category: 'desserts', name: 'Ø£Ù… Ø¹Ù„ÙŠ', name_en: 'Om Ali', price: '7,000', img: 'https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?auto=format&fit=crop&w=800', desc: 'Ø­Ù„ÙˆÙ‰ Ø§Ù„Ø­Ù„ÙŠØ¨ ÙˆØ§Ù„Ø±Ù‚Ø§Ø¦Ù‚ ÙˆØ§Ù„Ù…ÙƒØ³Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø®Ù†Ø©', desc_en: 'Hot milk dessert with flakes and nuts.', ingredients: [{ n: 'Ø­Ù„ÙŠØ¨', i: 'ğŸ¥›' }, { n: 'Ø±Ù‚Ø§Ø¦Ù‚', i: 'ğŸ¥' }, { n: 'Ù‚Ø´Ø·Ø©', i: 'â˜ï¸' }, { n: 'Ø²Ø¨ÙŠØ¨', i: 'ğŸ‡' }] },
    { id: 24, category: 'desserts', name: 'Ø²Ù„Ø§Ø¨ÙŠØ© (Churros)', name_en: 'Zalabia', price: '4,000', img: 'https://images.unsplash.com/photo-1543943482-6c9f19c1508b?auto=format&fit=crop&w=800', desc: 'Ø¹Ø¬ÙŠÙ† Ù…Ù‚Ù„ÙŠ ÙˆÙ…ØºØ·Ù‰ Ø¨Ø§Ù„Ø´ÙŠØ±Ø© (Ø§Ù„Ø¹Ø³Ù„)', desc_en: 'Fried dough with syrup.', ingredients: [{ n: 'Ø¹Ø¬ÙŠÙ†', i: 'ğŸ¥¨' }, { n: 'Ø²ÙŠØª', i: 'ğŸŒ»' }, { n: 'Ø´ÙŠØ±Ø©', i: 'ğŸ¯' }] },
    { id: 25, category: 'desserts', name: 'Ø¨Ù‚Ù„Ø§ÙˆØ© Ù…Ø´ÙƒÙ„Ø©', name_en: 'Mixed Baklava', price: '10,000', img: 'https://images.unsplash.com/photo-1505252585461-04db1eb84625?auto=format&fit=crop&w=800', desc: 'ØªØ´ÙƒÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ø¨Ù‚Ù„Ø§ÙˆØ© Ø§Ù„ÙØ§Ø®Ø±Ø© Ø¨Ø§Ù„ÙØ³ØªÙ‚', desc_en: 'Variety of luxury pistachio baklava.', ingredients: [{ n: 'Ø±Ù‚Ø§Ø¦Ù‚', i: 'ğŸ“„' }, { n: 'ÙØ³ØªÙ‚', i: 'ğŸ¥œ' }, { n: 'Ø³Ù…Ù†', i: 'ğŸ§ˆ' }, { n: 'Ø¹Ø³Ù„', i: 'ğŸ¯' }] },
    { id: 26, category: 'desserts', name: 'ØªØ´ÙŠØ² ÙƒÙŠÙƒ', name_en: 'Cheesecake', price: '9,000', img: 'https://images.unsplash.com/photo-1578775887804-699de7086ff9?auto=format&fit=crop&w=800', desc: 'ØªØ´ÙŠØ² ÙƒÙŠÙƒ Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ Ù…Ø¹ ØµÙˆØµ Ø§Ù„ÙØ±Ø§ÙˆÙ„Ø©', desc_en: 'New York cheesecake with strawberry sauce.', ingredients: [{ n: 'Ø¬Ø¨Ù† ÙƒØ±ÙŠÙ…ÙŠ', i: 'ğŸ§€' }, { n: 'Ø¨Ø³ÙƒÙˆÙŠØª', i: 'ğŸª' }, { n: 'ÙØ±Ø§ÙˆÙ„Ø©', i: 'ğŸ“' }] },
    { id: 27, category: 'desserts', name: 'Ù‚Ø·Ø§ÙŠÙ Ø¨Ø§Ù„Ø¬ÙˆØ²', name_en: 'Qatayef with Walnut', price: '5,000', img: 'https://images.unsplash.com/photo-1565958011703-44f9829ba187?auto=format&fit=crop&w=800', desc: 'Ù‚Ø·Ø§ÙŠÙ Ù…Ù‚Ù„ÙŠØ© Ù…Ø­Ø´ÙˆØ© Ø¨Ø§Ù„Ø¬ÙˆØ² ÙˆØ§Ù„Ù‚Ø±ÙØ©', desc_en: 'Fried qatayef stuffed with walnuts.', ingredients: [{ n: 'Ù‚Ø·Ø§ÙŠÙ', i: 'ğŸ¥' }, { n: 'Ø¬ÙˆØ²', i: 'ğŸ¥œ' }, { n: 'Ù‚Ø±ÙØ©', i: 'ğŸ¤' }, { n: 'Ù‚Ø·Ø±', i: 'ğŸ¯' }] },
    { id: 28, category: 'desserts', name: 'Ù…ÙŠÙ„Ùƒ Ø´ÙŠÙƒ Ø£ÙˆØ±ÙŠÙˆ', name_en: 'Oreo Milkshake', price: '6,000', img: 'https://images.unsplash.com/photo-1577805947697-89e18249d767?auto=format&fit=crop&w=800', desc: 'Ù…Ø®ÙÙˆÙ‚ Ø§Ù„Ø­Ù„ÙŠØ¨ Ù…Ø¹ Ø¨Ø³ÙƒÙˆÙŠØª Ø§Ù„Ø£ÙˆØ±ÙŠÙˆ ÙˆØ§Ù„ÙƒØ±ÙŠÙ…Ø©', desc_en: 'Milkshake with Oreo cookies and cream.', ingredients: [{ n: 'Ø­Ù„ÙŠØ¨', i: 'ğŸ¥›' }, { n: 'Ø£ÙˆØ±ÙŠÙˆ', i: 'ğŸª' }, { n: 'Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ…', i: 'ğŸ¦' }] },
    { id: 29, category: 'desserts', name: 'Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… Ø²Ø¹ÙØ±Ø§Ù†', name_en: 'Saffron Ice Cream', price: '7,000', img: 'https://images.unsplash.com/photo-1563805042-7684c019e1cb?auto=format&fit=crop&w=800', desc: 'Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… Ø¹Ø±Ø¨ÙŠ Ø¨Ù†ÙƒÙ‡Ø© Ø§Ù„Ø²Ø¹ÙØ±Ø§Ù† ÙˆØ§Ù„ÙØ³ØªÙ‚', desc_en: 'Arabic ice cream with saffron and pistachio.', ingredients: [{ n: 'Ø­Ù„ÙŠØ¨', i: 'ğŸ¥›' }, { n: 'Ø²Ø¹ÙØ±Ø§Ù†', i: 'ğŸŒº' }, { n: 'ÙØ³ØªÙ‚', i: 'ğŸ¥œ' }, { n: 'ÙˆØ±Ø¯', i: 'ğŸŒ¹' }] },
    { id: 30, category: 'desserts', name: 'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø§Ø²Ø¬', name_en: 'Fresh Orange Juice', price: '4,000', img: 'https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?auto=format&fit=crop&w=800', desc: 'Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø¨ÙŠØ¹ÙŠ 100% Ø¨Ø¯ÙˆÙ† Ø¥Ø¶Ø§ÙØ§Øª', desc_en: '100% natural orange juice.', ingredients: [{ n: 'Ø¨Ø±ØªÙ‚Ø§Ù„', i: 'ğŸŠ' }, { n: 'Ø«Ù„Ø¬', i: 'ğŸ§Š' }] }
];

let cartItems = JSON.parse(localStorage.getItem('cart')) || [];
const DELIVERY_FEE = 2000;

// === Language Logic ===
function updateLanguage() {
    const lang = currentLang;
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.getElementById('langText').innerText = lang === 'ar' ? 'EN' : 'AR';

    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            el.innerHTML = translations[lang][key];
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (translations[lang][key]) {
            el.placeholder = translations[lang][key];
        }
    });

    renderMenu(document.querySelector('.tab-btn.active')?.dataset.category || 'eastern');
    updateCartUI();
    checkStoreStatus();
}

function toggleLanguage() {
    currentLang = currentLang === 'ar' ? 'en' : 'ar';
    localStorage.setItem('lang', currentLang);
    updateLanguage();
}

// === Store Status Logic ===
function checkStoreStatus() {
    const now = new Date();
    const hour = now.getHours();
    const isOpen = hour >= 10 || hour < 2;

    const statusBanner = document.getElementById('store-status-banner') || (() => {
        const d = document.createElement('div');
        d.id = 'store-status-banner';
        document.body.prepend(d);
        return d;
    })();

    statusBanner.className = isOpen ? 'status-open' : 'status-closed';
    statusBanner.innerText = isOpen ? translations[currentLang].status_open : translations[currentLang].status_closed;
}

// === Toast System ===
function showToast(message) {
    const container = document.getElementById('toast-container') || (() => {
        const c = document.createElement('div');
        c.id = 'toast-container';
        document.body.appendChild(c);
        return c;
    })();

    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.innerHTML = `<i class="fas fa-check-circle"></i> <span>${message}</span>`;
    container.appendChild(toast);

    setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.3s forwards';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// === Search Logic ===
let searchQuery = "";
function handleSearch() {
    searchQuery = document.getElementById('menuSearch').value.toLowerCase();
    renderMenu(document.querySelector('.tab-btn.active').dataset.category);
}

// === Render Menu ===
function renderMenu(filter = 'eastern') {
    const grid = document.getElementById('menuGrid');
    grid.innerHTML = '';

    const filteredItems = menuItems.filter(item => {
        const matchesCategory = item.category === filter;
        const name = currentLang === 'ar' ? item.name : item.name_en;
        const matchesSearch = name.toLowerCase().includes(searchQuery);
        return matchesCategory && matchesSearch;
    });

    filteredItems.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'dish-card';
        card.style.animationDelay = `${index * 0.05}s`;
        card.onclick = (e) => {
            if (!e.target.closest('.add-btn')) openExplosionModal(item);
        };

        const name = currentLang === 'ar' ? item.name : item.name_en;
        const desc = currentLang === 'ar' ? item.desc : item.desc_en;

        card.innerHTML = `
            <div class="dish-img-container">
                <img src="${item.img}" alt="${name}" class="dish-img" loading="lazy">
            </div>
            <div class="dish-info">
                <h3 class="dish-title">${name}</h3>
                <p class="dish-desc">${desc}</p>
                <div class="dish-footer">
                    <span class="price">${item.price} <small>${translations[currentLang].currency}</small></span>
                    <button class="add-btn" onclick="addToCart(${item.id})"><i class="fas fa-plus"></i></button>
                </div>
            </div>
        `;
        grid.appendChild(card);
    });
}

// === Tabs Logic ===
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function () {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        renderMenu(this.dataset.category);
    });
});

// === Cart Logic ===
function addToCart(itemId) {
    const item = menuItems.find(i => i.id === itemId);
    const existing = cartItems.find(i => i.id === itemId);
    if (existing) existing.quantity++;
    else cartItems.push({ ...item, quantity: 1 });

    localStorage.setItem('cart', JSON.stringify(cartItems));
    updateCartUI();
    const itemName = currentLang === 'ar' ? item.name : item.name_en;
    showToast(translations[currentLang].toast_added.replace('{item}', itemName));
}

function updateCartUI() {
    const cartCount = cartItems.reduce((acc, item) => acc + item.quantity, 0);
    document.querySelector('.cart-count').innerText = cartCount;

    const subTotal = cartItems.reduce((acc, item) => acc + (parseInt(item.price.replace(/,/g, '')) * item.quantity), 0);
    const total = subTotal > 0 ? subTotal + DELIVERY_FEE : 0;

    document.getElementById('cartSubTotal').innerText = `${subTotal.toLocaleString()} ${translations[currentLang].currency}`;
    document.getElementById('cartFinalTotal').innerText = `${total.toLocaleString()} ${translations[currentLang].currency}`;

    if (document.getElementById('modalSubTotal')) {
        document.getElementById('modalSubTotal').innerText = `${subTotal.toLocaleString()} ${translations[currentLang].currency}`;
        document.getElementById('modalFinalTotal').innerText = `${total.toLocaleString()} ${translations[currentLang].currency}`;
    }

    renderCartItems();
}

function renderCartItems() {
    const container = document.getElementById('cartItems');
    if (cartItems.length === 0) {
        container.innerHTML = `<div style="text-align:center; padding: 20px; color:#777;">${translations[currentLang].cart_empty}</div>`;
        return;
    }

    container.innerHTML = cartItems.map(item => {
        const name = currentLang === 'ar' ? item.name : item.name_en;
        return `
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid #f9f9f9; padding-bottom:10px;">
                <div>
                    <div style="font-weight:bold; font-size:0.95rem;">${name}</div>
                    <div style="font-size:0.85rem; color:#666;">${item.price} ${translations[currentLang].currency}</div>
                </div>
                <div style="display:flex; align-items:center; gap:8px;">
                    <button onclick="changeQty(${item.id}, -1)" class="qty-btn" style="width:25px; height:25px; border-radius:50%; border:1px solid #ddd; background:#fff;">-</button>
                    <span>${item.quantity}</span>
                    <button onclick="changeQty(${item.id}, 1)" class="qty-btn" style="width:25px; height:25px; border-radius:50%; border:1px solid #ddd; background:#fff;">+</button>
                    <i class="fas fa-trash-alt" onclick="removeItem(${item.id})" style="color:#d9534f; cursor:pointer;"></i>
                </div>
            </div>
        `;
    }).join('');
}

function changeQty(id, delta) {
    const item = cartItems.find(i => i.id === id);
    if (item) {
        item.quantity += delta;
        if (item.quantity <= 0) removeItem(id);
        else {
            localStorage.setItem('cart', JSON.stringify(cartItems));
            updateCartUI();
        }
    }
}

function removeItem(id) {
    cartItems = cartItems.filter(i => i.id !== id);
    localStorage.setItem('cart', JSON.stringify(cartItems));
    updateCartUI();
}

function toggleCart() {
    const sidebar = document.getElementById('cartSidebar');
    const isOpen = sidebar.style.display === 'flex';

    if (isOpen) {
        sidebar.style.display = 'none';
        sidebar.classList.remove('active');
    } else {
        sidebar.style.display = 'flex';
        setTimeout(() => sidebar.classList.add('active'), 10);
    }
}

// === Explosion Modal Logic ===
function openExplosionModal(item) {
    const modal = document.getElementById('explosionModal');
    const mainDish = document.getElementById('mainDishView');
    const img = document.getElementById('modalImg');
    const title = document.getElementById('modalTitle');
    const panel = document.getElementById('ingredientsPanel');
    const container = document.getElementById('explosionContainer');

    document.querySelectorAll('.ingredient-particle').forEach(el => el.remove());

    const name = currentLang === 'ar' ? item.name : item.name_en;
    img.src = item.img;
    title.innerText = name;
    panel.innerHTML = '';
    panel.classList.remove('show');
    modal.classList.add('active');

    mainDish.style.animation = 'shake 0.5s infinite';

    setTimeout(() => {
        mainDish.style.animation = 'none';

        const radius = window.innerWidth < 768 ? 120 : 200;

        item.ingredients.forEach((ing, i) => {
            const particle = document.createElement('div');
            particle.className = 'ingredient-particle';
            particle.innerText = ing.i;
            particle.style.position = 'absolute';
            particle.style.opacity = '0';

            container.appendChild(particle);

            const angle = (i * (360 / item.ingredients.length)) * (Math.PI / 180);
            const destX = Math.cos(angle) * radius;
            const destY = Math.sin(angle) * radius;

            setTimeout(() => {
                particle.style.opacity = '1';
                particle.style.transform = `translate(${destX}px, ${destY}px)`;
            }, 50);

            panel.innerHTML += `
                <div class="ingredient-item">
                    <div style="font-size: 2rem;">${ing.i}</div>
                    <div style="font-size: 0.9rem;">${currentLang === 'ar' ? ing.n : ing.n}</div>
                </div>
            `;
        });

        setTimeout(() => panel.classList.add('show'), 800);
    }, 600);
}

function addToCartFromModal() {
    const itemName = document.getElementById('modalTitle').innerText;
    const item = menuItems.find(i => (currentLang === 'ar' ? i.name : i.name_en) === itemName);
    if (item) {
        addToCart(item.id);
        closeModal();
    }
}

function closeModal() {
    document.getElementById('explosionModal').classList.remove('active');
}

// === Checkout Logic ===
function openCheckoutModal() {
    if (cartItems.length === 0) {
        showToast(currentLang === 'ar' ? "Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!" : "Cart is empty!");
        return;
    }
    toggleCart();
    document.getElementById('checkoutModal').classList.add('active');
}

function closeCheckoutModal() {
    document.getElementById('checkoutModal').classList.remove('active');
}

function finalizeOrder() {
    const name = document.getElementById('custName').value.trim();
    const phone = document.getElementById('custPhone').value.trim();
    const address = document.getElementById('custAddress').value.trim();
    const landmark = document.getElementById('custLandmark').value.trim();

    const phoneRegex = /^(07[3-9][0-9]{8}|009647[3-9][0-9]{8}|\+9647[3-9][0-9]{8})$/;

    if (!name || name.length < 3) {
        showToast(currentLang === 'ar' ? "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" : "Please enter full name");
        return;
    }
    if (!phoneRegex.test(phone)) {
        showToast(currentLang === 'ar' ? "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­" : "Invalid phone number");
        return;
    }
    if (!address || address.length < 10) {
        showToast(currentLang === 'ar' ? "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„" : "Please write detailed address");
        return;
    }

    const subTotalVal = cartItems.reduce((acc, item) => acc + (parseInt(item.price.replace(/,/g, '')) * item.quantity), 0);
    const finalTotal = subTotalVal + DELIVERY_FEE;

    let message = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ğŸ›ï¸*%0a`;
    message += `-----------------------------%0a`;
    message += `*ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ†:*%0a`;
    message += `Ø§Ù„Ø§Ø³Ù…: ${name}%0aØ§Ù„Ù‡Ø§ØªÙ: ${phone}%0aØ§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}%0aÙ†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©: ${landmark}%0a`;
    message += `-----------------------------%0a`;
    message += `*ğŸ½ï¸ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:*%0a`;

    cartItems.forEach(item => {
        const itemTotal = parseInt(item.price.replace(/,/g, '')) * item.quantity;
        message += `- ${item.name} (x${item.quantity}): ${itemTotal.toLocaleString()} Ø¯.Ø¹%0a`;
    });

    message += `-----------------------------%0a`;
    message += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${subTotalVal.toLocaleString()} Ø¯.Ø¹%0a`;
    message += `Ø§Ù„ØªÙˆØµÙŠÙ„: ${DELIVERY_FEE.toLocaleString()} Ø¯.Ø¹%0a`;
    message += `*Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙƒÙ„ÙŠ: ${finalTotal.toLocaleString()} Ø¯.Ø¹*%0a`;

    window.open(`https://wa.me/9647706205459?text=${message}`, '_blank');

    cartItems = [];
    localStorage.removeItem('cart');
    updateCartUI();
    closeCheckoutModal();
}

function toggleMenu() {
    const links = document.querySelector('.nav-links');
    links.classList.toggle('active');
}

function scrollToMenu(cat) {
    document.getElementById('menu').scrollIntoView();
    const btn = document.querySelector(`.tab-btn[data-category="${cat}"]`);
    if (btn) btn.click();
}

// === Map & Init ===
window.onload = () => {
    updateLanguage();

    if (typeof L !== 'undefined') {
        const map = L.map('map').setView([33.3152, 44.3661], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'OpenStreetMap'
        }).addTo(map);
        L.marker([33.3152, 44.3661]).addTo(map).bindPopup('Ù…Ø·Ø¹Ù… Ø­Ø¨Ø§ÙŠØ¨Ù†Ø§').openPopup();
    }

    const galleryGrid = document.getElementById('galleryGrid');
    const galleryImages = [
        'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&w=800',
        'https://images.unsplash.com/photo-1552566626-52f8b828add9?auto=format&fit=crop&w=800',
        'https://images.unsplash.com/photo-1559339352-11d035aa65de?auto=format&fit=crop&w=800'
    ];
    galleryGrid.innerHTML = galleryImages.map(img => `<div class="gallery-item"><img src="${img}"></div>`).join('');

    const reviewsCon = document.getElementById('reviewsContainer');
    const reviews = [
        { name: "Ahmed", text: "Ø£ÙØ¶Ù„ ÙƒØ¨Ø§Ø¨ ÙÙŠ Ø¨ØºØ¯Ø§Ø¯!", text_en: "Best kebab in Baghdad!" },
        { name: "Sarah", text: "Ø§Ù„Ø®Ø¯Ù…Ø© Ø³Ø±ÙŠØ¹Ø© ÙˆØ§Ù„Ø£ÙƒÙ„ ÙŠØ¬Ù†Ù†", text_en: "Fast service and amazing food!" }
    ];
    reviewsCon.innerHTML = reviews.map(r => `
        <div class="review-card">
            <p class="review-text">"${currentLang === 'ar' ? r.text : r.text_en}"</p>
            <p class="review-author">- ${r.name}</p>
        </div>
    `).join('');
};
